var apiUtils = require("../util");
var runtimeAPI;

module.exports = {
    init: function(_runtimeAPI) {
        runtimeAPI = _runtimeAPI;
    },
    createSubflow: function(req,res) {
        const body = req.body;
        const meta = body ? body.meta : null;
        const flow = body ? body.flow : null;
        const opts = {
            meta: meta,
            flow: flow
        };
        runtimeAPI.subflows.createSubflow(opts).then(function(result) {
            res.send(result);
        }).catch(function(err) {
            apiUtils.rejectHandler(req,res,err);
        });
    }
}
