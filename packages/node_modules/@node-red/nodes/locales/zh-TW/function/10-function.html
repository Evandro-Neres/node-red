<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-help-name="function">
  <p>以 JavaScript 自定義訊息的處理函式。</p>
  <p>輸入訊息相關資訊可以從<code>msg</code> JavaScript 物件中取得。</p>
  <p>通常，<code>msg</code>物件將訊息主要內容保存在<code>msg.payload</code>屬性中。</p>
  <p>一般情況下，函式需要回傳一個 msg 物件（或以陣列形式回傳多個 msg 物件），但也可以爲了中斷流程執行而什麽都不回傳。</p>
  <h3>詳細</h3>
  <p>請參見<a target="_blank" href="http://nodered.org/docs/writing-functions.html">線上文件</a>來獲得更多有關撰寫函式的說明資訊。</p>
  <h4>傳送訊息</h4>
  <p>要將訊息傳遞到流程中的下一個節點，請回傳<code>msg</code>物件或呼叫<code>node.send(messages)</code>方法完成。</p>
  <p>當回傳或呼叫node.send()所帶的內容為：</p>
  <ul>
	<li>單個<code>msg</code>物件 - 將單一訊息從第一個 output 連接點輸出。</li>
    <li><code>msg</code>物件陣列 - 將多則訊息依據陣練元素順序相應的 output 連接點輸出。</li>
  </ul>
  <p>如果回傳值爲，<code>null</code>，將不會發送任何訊息。</p>
  <h4>日誌輸出和錯誤處理</h4>
  <p>可以使用以下內建函式，輸出日誌資訊和輸出錯誤：</p>
    <ul>
        <li><code>node.log('日誌訊息')</code></li>
        <li><code>node.warn('警告訊息')</code></li>
        <li><code>node.error('錯誤訊息')</code></li>
    </ul>
  </p>
  <p>用 catch 節點可以進行例外錯誤攔截處理，若要由 catch 節點處理，請將<code>msg</code>作爲<code>node.error</code>的第二個參數傳遞：</p>
  <pre>node.error('Error', msg);</pre>
  <h4>存取節點資訊</h4>
  <p>您可以使用下列方法存取節點屬性，以在程式碼中取得節點 ID 和名稱：</p>
  <ul>
      <li><code>node.id</code> - 節點的 ID</li>
      <li><code>node.name</code> - 節點的名稱</li>
  </ul>
  <h4>使用環境變數</h4>
  <p>環境變數可以透過<code>env.get('MY_ENV_VAR')</code>方法來進行存取。</p>
</script>
