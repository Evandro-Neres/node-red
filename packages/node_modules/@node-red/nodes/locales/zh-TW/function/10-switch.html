<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-help-name="switch">
  <p>依據條件決定訊息的處理方式和下一個處理節點。</p>
  <h3>詳細</h3>
  <p>根據接收到的訊息內容和當下的執行狀態，然後根據判斷規則將訊息發送到與相對應的連接點輸出。</p>
  <p>可以將節點行為設定爲一旦滿足條件，則停止後續的檢查判斷。</p>
  <p>對於規則條件檢查，可以使用<code>msg</code>物件內容、流程上下文屬性、全域上下文屬性、環境變數或 JSONata 表達式的執行結果。</p>
  <h4>規則</h4>
  <p>有四種規則：</p>
  <ol>
      <li><b>值</b> - 根據設定的屬性作為檢查條件</li>
      <li><b>序列</b> - 可用於訊息序列，例如由「Split」節點所生成的結果</li>
      <li><b>JSONata表達式</b> - 檢查整個訊息，如果結果爲真，則滿足條件。</li>
      <li><b>其他</b> - 上述規則都不滿足條件時適用</li>
  </ol>
  <h4>註</h4>
  <p><code>is true/false</code>與<code>is null</code> 規則將對資料型態進行嚴格的檢查。</p>
  <p><code>is empty</code>與<code>is not empty</code>規則可以用於字串長度、buffer 陣列或物件的屬性數量，也可以用於判斷<code>null</code>或<code>undefined</code>的情況。</p>
  <h4>訊息序列的處理</h4>
  <p>預設情況下，節點不會修改<code>msg.parts</code>屬性。</p>
  <p>可以啓用<b>重建訊息序列</b>選項來爲每條符合條件的規則生成新的訊息序列。在這種模式下，節點將在發送新訊息序列之前，對原始傳入的訊息序列進行暫時保存。運行時的設定<code>nodeMessageBufferMaxLength</code>可以用來限制容許暫存的訊息數目。</p>
</script>
