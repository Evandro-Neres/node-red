<!--
  Copyright JS Foundation and other contributors, http://js.foundation
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-help-name="mqtt in">
    <p>連接到 MQTT Broker 並訂閱來自指定 topic 的訊息。</p>
    <h3>輸出</h3>
    <dl class="message-properties">
       <dt>payload <span class="property-type">字串 | buffer</span></dt>
       <dd>如果不是二進位的 buffer 就是字串</dd>
       <dt>topic <span class="property-type">字串</span></dt>
       <dd>MQTT topic，以<code>/</code>作爲分層結構的分隔字元。</dd>
       <dt>qos <span class="property-type">數值</span> </dt>
       <dd>QoS 服務品質：0 - 最多一次； 1 - 最少一次； 2 - 只有一次。</dd>
       <dt>retain <span class="property-type">布爾值</span></dt>
       <dd>值設爲 true 時表示訊息被保留在 Broker 上且可能是舊的。</dd>
    </dl>
    <h3>詳細</h3>
    <p>訂閱 topic 可以包括 MQTT 規則表達式（+：一個級別，＃：多個級別）。</p>
    <p>使用此節點您首先需要建立與 MQTT Broker 的連線，可以通過單擊鉛筆圖示來進行設定。</p>
    <p>如果需要，幾個 MQTT 節點（in 或 out）可以共享相同的連線。</p>
</script>

<script type="text/x-red" data-help-name="mqtt out">
    <p>連接到 MQTT Broker 並發佈訊息。</p>
    <h3>輸入</h3>
    <dl class="message-properties">
       <dt>payload <span class="property-type">字串 | buffer</span></dt>
       <dd>要發佈的訊息內容。如果未設定此屬性，則不會發送任何訊息。要發送空白訊息，請將此屬性設定爲空字串。</dd>

       <dt class="optional">topic <span class="property-type">字串</span></dt>
       <dd>要發佈的 MQTT topic。</dd>

       <dt class="optional">qos <span class="property-type">number</span></dt>
       <dd>QoS 服務品質：0 - 最多一次； 1 - 最少一次； 2 - 只有一次。預設值爲 0。</dd>

       <dt class="optional">retain <span class="property-type">布爾值</span></dt>
       <dd>設定爲<code>true</code>來將訊息保留在 Broker 上。預設值爲<code>false</code>。</dd>
    </dl>
    <h3>詳細</h3>
    <p><code>msg.payload</code>用作已發佈訊息的 payload。如果包含 Object，則會在發送之前將其轉換爲 JSON 字串。如果它包含二進位的 buffer，則訊息將以原始內容發佈。</p>
    <p>可以在節點中設定所使用的 topic，或者如果留爲空白，則可以動態透過<code>msg.topic</code>進行設定。</p>
    <p>同樣，亦可以在節點中設定 QoS 和保留值，或者如果為空白，則分別由<code>msg.qos</code>和<code>msg.retain</code>動態決定。要清除先前存儲在 Broker 中的 topic，請設定 retain 並向該 topic 發佈空訊息。</p>
    <p>該節點需要設定 MQTT Broker 的連線。通過單擊鉛筆圖示進行設定。</p>
    <p>如果需要，幾個 MQTT 節點（in 或 out）可以共享相同的連線。</p>
</script>

<script type="text/x-red" data-help-name="mqtt-broker">
    <p>與 MQTT Broker 的連線設定。</p>
    <p>建立與 Broker 的連線設定。可以在<code>MQTT In</code>和<code>MQTT Out</code>節點中重複利用連線設定。</p>
    <p>如果未爲此節點設定客戶端 ID，並且設定了 Session 的初始化，則將生成一個隨機客戶端 ID。設定客戶端 ID 時，請確保它對於 Broker 上是唯一的。</p>
    <h4>Birth Message</h4>
    <p>連線建立成功後，將發佈到 topic 的訊息。</p>
    <h4>Close Message</h4>
    <p>連線正常中斷前（重新部署或刪除節點時），發佈到 topic 的訊息。</p>
    <h4>Will Message</h4>
	<p>當意外連線中斷時，所發佈到 topic 的訊息（此訊息將由 Broker 代為發佈）。</p>
    <h4>WebSockets</h4>
    <p>此節點可以使用 WebSocket 連線。使用 WebSocket 時，請在服務器位置中以完整格式描述連接目標的 URI。例如：</p>
    <pre>ws://example.com:4000/mqtt</pre>
</script>
