<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-help-name="json">
    <p>在 JSON 字串及其 JavaScript 物件表達形式之間相互轉換。</p>
    <h3>輸入</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | 字串</span></dt>
        <dd>JavaScript 物件或 JSON 字串。</dd>
        <dt>schema<span class="property-type">object</span></dt>
        <dd>可選擇設定的 JSON Schema 物件用於驗證 payload 內容。此屬性將在 <code>msg</code> 被發送輸入到下一個節點之前被刪除。</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | 字串</span></dt>
        <dd>
            <ul>
                <li>如果輸入是 JSON 字串，它將嘗試將其轉換爲 JavaScript 物件。</li>
                <li>如果輸入是 JavaScript 物件，它將建立一個 JSON 字串，並可以選擇對此 JSON 字串進行格式最佳化調整。</li>
            </ul>
        </dd>
        <dt>schemaError<span class="property-type">陣列</span></dt>
        <dd>如果 JSON 模式驗證失敗，則 catch 節點捕捉的錯誤訊息將包含錯誤陣列的 <code>schemaError</code> 屬性。</dd>
    </dl>
    <h3>詳細</h3>
    <p>預設會轉換輸入的 <code>msg.payload</code>，但是也可以轉換訊息內的其它屬性。</p>
    <p>您可以將其設定爲只執行特定單向的轉換，而不是自動判斷並執行雙向轉換。例如，即使對 <code>HTTP In</code> 節點的請求未正確設置「content-type」，也可以使用這設定來確保 JSON 節點的轉換回傳結果是 JavaScript 物件。</p>
    <p>如果操作的設定值被指定了「總是轉換爲 JSON 字串」，則不會對輸入的字串進行進一步檢查。也就是說，即使啟用了格式化 JSON 字串的選項，它也不會檢查字串是否正確爲 JSON。</p>
    <p>有關 JSON Schema 的更多詳細資訊，請查閱<a href="http://json-schema.org/latest/json-schema-validation.html">規範</a>.</p>
</script>
